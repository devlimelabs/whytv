<div class="relative h-screen w-full overflow-hidden bg-black">
  <!-- Logo in top right corner with fade-away behavior -->
  <div
    class="absolute -top-4 -right-2 z-[9999] transition-opacity duration-300"
    [ngClass]="showControls() ? 'opacity-100' : 'opacity-0'"
  >
    <img src="/whytv.ai-logo.png" alt="WhyTV Logo" class="h-48 w-auto" />
  </div>

  <!-- Loading Indicator - Only show when channels are loading -->
  @if (isLoading()) {
  <div
    class="absolute inset-0 flex items-center justify-center bg-black/50 z-[9999]"
  >
    <div
      class="w-12 h-12 border-4 border-white/30 border-t-white rounded-full animate-spin"
    ></div>
  </div>
  }

  <!-- YouTube Video Player -->
  @if (!isLoading() && currentChannel().videos.length > 0) {
  <!-- Google YouTube Player -->
  <app-google-youtube-player
    [videoId]="currentChannel().videos[currentVideoIndex()].youtubeId"
    [isPlaying]="isPlaying()"
    [video]="currentChannel().videos[currentVideoIndex()]"
    (playPause)="togglePlayPause()"
    (videoEnded)="handleVideoEnded()"
    (videoError)="handleVideoError($event)"
    (nextVideo)="handleNextVideo()"
    (previousVideo)="handlePreviousVideo()"
    (controlsVisibilityChange)="handleControlsVisibilityChange($event)"
    class="h-full"
  />
  } @if (!isLoading() && currentChannel().videos.length === 0) {
  <!-- No videos message -->
  <div
    class="absolute inset-0 flex flex-col items-center justify-center bg-black text-white"
  >
    <div class="text-2xl font-bold mb-2">No Videos Available</div>
    <div class="text-lg text-gray-400">
      This channel doesn't have any videos yet.
    </div>
  </div>
  }

  <!-- <app-channel-rail
    [channels]="mockChannels"
    [activeChannel]="currentChannel()"
    (channelSelect)="handleChannelSelect($event)"
  /> -->

  <!-- Channel Picker - Only show when not loading -->
  @if (!isLoading()) {
  <app-channel-picker
    [channels]="channels()"
    [activeChannel]="currentChannel()"
    (channelSelect)="handleChannelSelect($event)"
  />
  }
</div>

<!-- Toast moved outside the main container to ensure it's not affected by relative positioning -->
<p-toast position="top-left" [baseZIndex]="9999" />
